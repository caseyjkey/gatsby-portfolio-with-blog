{"version":3,"file":"component---src-pages-blog-tsx-7de36241847753a9e250.js","mappings":"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","sources":["webpack://portfolio-app/./src/components/Blog/style.ts","webpack://portfolio-app/./src/components/Blog.tsx","webpack://portfolio-app/./src/pages/blog.tsx"],"sourcesContent":["import styled from 'styled-components'\r\nimport { Section, Image } from '../style.ts'\r\n\r\nexport const BlogSection = styled.section`\r\n  margin-top: 6em;\r\n`;\r\n\r\nexport const BlogEntry = styled.div<{ isLast?: boolean }>`\r\n    padding-bottom: ${props => props.isLast ? '1.5rem' : '2em'};\r\n\r\n    img {\r\n        width: 100%;\r\n    }\r\n    p.excerpt {\r\n      color: ${(props) => props.theme.black};\r\n    }\r\n    a, p {\r\n      text-decoration: none;\r\n    }\r\n    ${props => props.isLast && `\r\n        p {\r\n            margin-bottom: 0;\r\n        }\r\n    `}\r\n`;\r\n","import { useStaticQuery, graphql, Link } from 'gatsby'\r\nimport React, { useState, useEffect, useRef, useCallback } from 'react'\r\nimport { Heading } from './style'\r\nimport { Container, Row, Col } from 'reactstrap'\r\nimport { BlogSection, BlogEntry } from './Blog/style'\r\nimport { motion } from 'motion/react'\r\nimport { fadeInUpVariants } from '../animations'\r\nimport { TIMING, STAGGER, SECONDARY_DELAYS } from '../animations/config'\r\nimport { useInViewAnimation } from '../animations/hooks/useInViewAnimation'\r\n\r\n// Animated blog entry component using enhanced hook\r\nconst AnimatedBlogEntry = ({\r\n    children,\r\n    index,\r\n    isInitialBatch,\r\n    shouldDelayForHeader,\r\n    isCalculated,\r\n    isLast\r\n}: {\r\n    children: React.ReactNode;\r\n    index: number;\r\n    isInitialBatch: boolean;\r\n    shouldDelayForHeader: boolean;\r\n    isCalculated: boolean;\r\n    isLast?: boolean;\r\n}) => {\r\n    const entryRef = useRef<HTMLDivElement>(null);\r\n\r\n    // Use enhanced hook with position detection\r\n    const { ref: hookRef, isInView, position } = useInViewAnimation({\r\n        skipAboveViewport: true,\r\n    });\r\n\r\n    // Combine refs\r\n    const combinedRef = useCallback((node: HTMLDivElement | null) => {\r\n        entryRef.current = node;\r\n        hookRef(node);\r\n    }, [hookRef]);\r\n\r\n    // Default delay is 0 for items that are scrolled into view later.\r\n    let delay = 0;\r\n\r\n    // For the initial batch of items visible on load, calculate a staggered delay.\r\n    if (isInitialBatch) {\r\n        // Start with a base delay to allow the header/subheader to animate first.\r\n        const baseDelay = shouldDelayForHeader ? 0.5 : 0;\r\n        // Add a stagger based on the item's index.\r\n        const staggerDelay = index * (STAGGER / 1000);\r\n        delay = baseDelay + staggerDelay;\r\n    }\r\n\r\n    // Prevent animation from starting until the initial batch calculation is complete.\r\n    const animateState = isCalculated && isInView ? \"visible\" : \"hidden\";\r\n\r\n    return (\r\n        <BlogEntry ref={combinedRef} className=\"blog-card-wrapper\" isLast={isLast}>\r\n            <motion.div\r\n                initial={position === 'above' ? false : 'hidden'}\r\n                animate={animateState}\r\n                custom={{\r\n                    delay,\r\n                    distance: TIMING.primaryUnit.distance\r\n                }}\r\n                variants={fadeInUpVariants}\r\n            >\r\n                {children}\r\n            </motion.div>\r\n        </BlogEntry>\r\n    );\r\n};\r\n\r\n\r\nexport const Blog = (props) => {\r\n    const containerRef = useRef<HTMLDivElement>(null);\r\n    const [initialBatchCount, setInitialBatchCount] = useState(0);\r\n    const [isCalculated, setIsCalculated] = useState(false);\r\n    const [shouldDelayForHeader, setShouldDelayForHeader] = useState(false);\r\n\r\n    const data = useStaticQuery(\r\n        graphql`\r\n            query {\r\n                allMdx(\r\n                    sort: {frontmatter: {date: DESC}}\r\n                    filter: { frontmatter: { published: { eq: true } } }\r\n                ) {\r\n                    nodes {\r\n                        id\r\n                        excerpt(pruneLength: 250)\r\n                        frontmatter {\r\n                            title\r\n                            date(formatString: \"YYYY MMMM Do\")\r\n                        }\r\n                        fields {\r\n                            slug\r\n                            preview\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        `\r\n    );\r\n\r\n    // Use the optimized hook for header viewport detection\r\n    const { ref: headerRef, isInView: isHeaderVisible } = useInViewAnimation({\r\n        once: true,\r\n    });\r\n\r\n    // Use the optimized hook for subheader viewport detection\r\n    const { ref: subheaderRef, isInView: isSubheaderVisible } = useInViewAnimation({\r\n        once: true,\r\n    });\r\n\r\n    // Calculate initial batch count after DOM is rendered\r\n    useEffect(() => {\r\n        setShouldDelayForHeader(typeof window !== 'undefined' ? window.scrollY < 10 : false);\r\n\r\n        const timer = setTimeout(() => {\r\n            const cards = containerRef.current?.querySelectorAll('.blog-card-wrapper');\r\n            if (!cards || cards.length === 0) {\r\n                setIsCalculated(true);\r\n                return;\r\n            }\r\n\r\n            const viewportHeight = window.innerHeight;\r\n            let count = 0;\r\n\r\n            for (let i = 0; i < cards.length; i++) {\r\n                const rect = cards[i].getBoundingClientRect();\r\n                if (rect.top < viewportHeight) {\r\n                    count++;\r\n                } else {\r\n                    break;\r\n                }\r\n            }\r\n\r\n            setInitialBatchCount(count);\r\n            setIsCalculated(true);\r\n        }, 100);\r\n\r\n        return () => clearTimeout(timer);\r\n    }, []);\r\n\r\n    return (\r\n        <BlogSection>\r\n            <Container className=\"\">\r\n                <Row className=\"g-0 justify-content-center pb-5\">\r\n                    <Col md={12} className=\"heading-section text-center\">\r\n                        <motion.div\r\n                            ref={headerRef}\r\n                            initial=\"hidden\"\r\n                            animate={isHeaderVisible ? \"visible\" : \"hidden\"}\r\n                            custom={{ delay: 0, distance: TIMING.sectionHeader.distance }}\r\n                            variants={fadeInUpVariants}\r\n                        >\r\n                            <Heading className=\"mb-4 mt-5\">Blog</Heading>\r\n                        </motion.div>\r\n                        <motion.p\r\n                            ref={subheaderRef}\r\n                            initial=\"hidden\"\r\n                            animate={isSubheaderVisible ? 'visible' : 'hidden'}\r\n                            custom={{ delay: SECONDARY_DELAYS.default }}\r\n                            variants={fadeInUpVariants}\r\n                        >\r\n                            Coding, reflecting, evolving.\r\n                        </motion.p>\r\n                    </Col>\r\n                </Row>\r\n                <div ref={containerRef}>\r\n                    <Row className=\"g-0 justify-content-center\">\r\n                        {data.allMdx.nodes.map(\r\n                            ({ id, excerpt, frontmatter, fields }, index) => (\r\n                                <Col key={id} xs={12} className=\"pb-4\">\r\n                                    <AnimatedBlogEntry\r\n                                        index={index}\r\n                                        isInitialBatch={isCalculated && index < initialBatchCount}\r\n                                        shouldDelayForHeader={shouldDelayForHeader}\r\n                                        isCalculated={isCalculated}\r\n                                        isLast={index === data.allMdx.nodes.length - 1}\r\n                                    >\r\n                                        <Link to={fields.slug}>\r\n                                            <h1>{frontmatter.title}</h1>\r\n                                            <p>{frontmatter.date}</p>\r\n                                            <p className=\"excerpt\">{excerpt?.trim() || fields?.preview}</p>\r\n                                        </Link>\r\n                                    </AnimatedBlogEntry>\r\n                                </Col>\r\n                            )\r\n                        )}\r\n                    </Row>\r\n                </div>\r\n            </Container>\r\n        </BlogSection>\r\n    );\r\n}\r\n","import React, { useEffect } from 'react'\r\nimport Layout from '../components/Layout'\r\nimport { Helmet } from 'react-helmet'\r\nimport { graphql } from 'gatsby'\r\nimport Favicon from '../data/favicon.png' \r\nimport WebsiteImage from '../data/projects/portfolio/images/portfolio.png'\r\nimport { ThemeProvider } from 'styled-components'\r\nimport { theme, Body } from '../components/style.ts'\r\nimport Navigation from '../components/Navigation'\r\nimport { Blog } from '../components/Blog'\r\nimport Footer from '../components/Footer'\r\n\r\nexport const query = graphql`\r\n  query {\r\n    site {\r\n      siteMetadata {\r\n        title\r\n        description\r\n        canonical\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport default function BlogPage({ data }) {\r\n    return (\r\n        <Layout>\r\n        <Helmet>\r\n            <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css\" />\r\n            <script async src=\"https://www.googletagmanager.com/gtag/js?id=G-1QQK6QY29Z\"></script>\r\n            <script>\r\n            {`\r\n                window.dataLayer = window.dataLayer || [];\r\n                function gtag(){dataLayer.push(arguments);}\r\n                gtag('js', new Date());\r\n\r\n                gtag('config', 'G-1QQK6QY29Z');\r\n            `}\r\n            </script>\r\n            <meta charSet=\"utf-8\" />\r\n            <title>{data.site.siteMetadata.title}</title>\r\n            <meta property='og:title' content=\"Casey Key - Software Engineer\" />\r\n            <meta property='og:image' content={WebsiteImage} />\r\n            <meta property='og:description' content={data.site.siteMetadata.description} />\r\n            <meta property='og:url' content={data.site.siteMetadata.canonical} />\r\n            <meta name=\"description\" content={data.site.siteMetadata.description} />\r\n            <link rel=\"canonical\" href={data.site.siteMetadata.canonical} />\r\n            <link rel=\"icon\" type=\"image/png\" href={Favicon} sizes=\"16x16\" />\r\n        </Helmet>\r\n        <ThemeProvider theme={theme}>\r\n            <Body>\r\n            <Navigation />\r\n            <Blog />\r\n            <Footer />\r\n            </Body>\r\n        </ThemeProvider>\r\n        </Layout>\r\n    );\r\n}"],"names":["BlogSection","styled","section","withConfig","displayName","componentId","BlogEntry","div","props","isLast","theme","black","AnimatedBlogEntry","_ref","children","index","isInitialBatch","shouldDelayForHeader","isCalculated","entryRef","useRef","ref","hookRef","isInView","position","useInViewAnimation","skipAboveViewport","combinedRef","useCallback","node","current","delay","STAGGER","animateState","React","className","motion","initial","animate","custom","distance","TIMING","primaryUnit","variants","fadeInUpVariants","Blog","containerRef","initialBatchCount","setInitialBatchCount","useState","setIsCalculated","setShouldDelayForHeader","data","useStaticQuery","headerRef","isHeaderVisible","once","subheaderRef","isSubheaderVisible","useEffect","window","scrollY","timer","setTimeout","_containerRef$current","cards","querySelectorAll","length","viewportHeight","innerHeight","count","i","getBoundingClientRect","top","clearTimeout","Container","Row","Col","md","sectionHeader","Heading","p","SECONDARY_DELAYS","default","allMdx","nodes","map","_ref2","id","excerpt","frontmatter","fields","key","xs","Link","to","slug","title","date","trim","preview","BlogPage","Layout","Helmet","rel","href","async","src","charSet","site","siteMetadata","property","content","WebsiteImage","description","canonical","name","type","Favicon","sizes","ThemeProvider","Body","Navigation","Footer"],"sourceRoot":""}