# Project Context for AI Assistants

## Project Overview
This is a personal portfolio website with blog functionality built using Gatsby and React.

## Current State
- **Framework**: Gatsby (React-based static site generator)
- **Styling**: styled-components with reactstrap (Bootstrap)
- **TypeScript**: Recently implemented - types are not fully added to all components yet
- **Content**: Portfolio projects with image galleries, blog posts, skills, contact info

## Migration Goals

### Primary Goal: Migrate from Gatsby to Astro
We are **aiming to make net-negative changes** (simplify the codebase) to eventually convert this site to use Astro instead of Gatsby.

**Why Astro?**
- Better performance with islands architecture
- Less JavaScript shipped to the client
- Simpler build process
- Better TypeScript support out of the box
- More flexible content handling

**Migration Strategy**:
- Prefer simpler, more portable solutions when fixing or adding features
- Avoid adding complex Gatsby-specific dependencies
- Keep components as vanilla React as possible
- Document any Gatsby-specific features that will need replacement

## Code Quality Guidelines

### TypeScript
- TypeScript was recently implemented
- **Action Required**: Add proper types and interfaces to components when working on them
- Convert `any` types to proper interfaces
- Add return types to functions
- Use proper typing for props, state, and component definitions

### Simplification Principles
1. **Net-negative changes**: When fixing bugs or adding features, try to remove more code than you add
2. **Reduce dependencies**: Prefer standard React patterns over library-specific solutions
3. **Avoid over-engineering**: Keep solutions simple and maintainable
4. **Framework-agnostic**: Write code that will be easier to migrate to Astro

### Component Structure
- Functional components preferred (already in use)
- Use React hooks for state management
- Keep styled-components usage (works with Astro)
- Minimize Gatsby-specific APIs (GraphQL queries, gatsby-image, etc.)

## Current Technical Debt

### Known Issues
1. **Lightbox Library**: Using `react-image-lightbox` (archived since Jan 2023)
   - Ctrl+Zoom closes the lightbox (browser zoom interferes)
   - Need better zoom functionality
   - Consider simpler alternatives or native solutions

2. **TypeScript Coverage**: Not all components have proper types
   - Props often use `any` type
   - Missing interfaces for data structures
   - No return type annotations on many functions

3. **Gatsby-Specific Code**: Heavy reliance on Gatsby APIs
   - GraphQL queries for content
   - gatsby-plugin-image for image optimization
   - Gatsby routing and page generation

## Development Priorities

1. **Maintainability**: Choose solutions that are actively maintained
2. **Portability**: Prefer solutions that work outside Gatsby ecosystem
3. **Simplicity**: Less code is better code
4. **Type Safety**: Add TypeScript types when touching components
5. **Performance**: Keep bundle size small

## Working with This Codebase

### When Adding Features
- Check if a simpler solution exists before adding dependencies
- Consider how it will migrate to Astro
- Add TypeScript types
- Aim for net-negative code changes

### When Fixing Bugs
- Look for opportunities to simplify while fixing
- Remove unused code
- Add proper types
- Document any Gatsby-specific workarounds

### When Reviewing Dependencies
- Check if dependency is actively maintained
- Consider if it's needed or if native browser APIs suffice
- Prefer framework-agnostic libraries
- Document alternatives for future migration

## File Structure
```
src/
├── components/     # React components
├── data/          # JSON data for projects, content
├── pages/         # Gatsby page components
├── styles/        # Global styles
└── templates/     # Gatsby templates for generated pages
```

## Development Commands

### Starting Dev Server
```bash
yarn develop
# or: npm run develop
```
This starts the Gatsby development server with hot-reloading using auto-port selection, which tries ports 8001-8008 in sequence until one is available, without requiring terminal input.

**Note**: The dev command uses `-H 0.0.0.0` to bind to all network interfaces for auto-port selection.

### Worktree Development
When working in a git worktree (e.g., `.worktrees/portfolio-enhancement`):
```bash
# Navigate to worktree
cd .worktrees/portfolio-enhancement

# Start dev server on alternative port
gatsby develop -p 8003

# Open in browser
# Server will be at http://localhost:8003/
```

Worktrees are isolated workspaces that share the git repository. Changes made in a worktree don't affect your main branch until merged.

### Creating a New Worktree
When starting a new feature, create a worktree for isolation:
```bash
# From the base folder (main branch), create a new worktree with feature branch
git worktree add .worktrees/feature-name -b feature-name

# Navigate to worktree and start working
cd .worktrees/feature-name
yarn develop
```

**Important:** AI agents should work in worktrees and use feature branches when appropriate. This keeps the main branch clean and allows for isolated development and testing before merging.

### Pushing Changes to Remote
Feature branches must be pushed periodically to make them available in the remote origin:
```bash
# From within the worktree
git push -u origin feature-name

# Push subsequent changes
git push
```

This ensures:
- Changes are backed up remotely
- Feature branches are available for code review
- CI/CD pipelines can run on the feature branch
- Team members can access and test the feature

### Building for Production
```bash
yarn gatsby build
```

### Running Tests
No test suite is currently configured for this project.

## Contact
This file should be updated as the codebase evolves and migration plans solidify.
